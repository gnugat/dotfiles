#!/usr/bin/env bash
# File: /10-shell/install.sh
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ๐ Generic shell stuff that can apply to bash, zsh, etc.
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

_SSDF_PACKAGE_DIR="$(cd "$(dirname "$(readlink -f "${BASH_SOURCE[0]}")")" && pwd -P)"
_SSDF_ROOT_DIR="$(cd "$(dirname "$(readlink -f "${BASH_SOURCE[0]}")")/.." && pwd -P)"
source "${_SSDF_ROOT_DIR}/00-_ssdf/functions.sh"

_SSDF_PACKAGE_NAME="shell"

_ssdf_echo_section_title "Installing ${_SSDF_PACKAGE_NAME} stuff (generic)..."

## โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
## ๐ฆ Call to `./_<package-manager>.sh` script.
## โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# N/A

## โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
## ๐ Symbolic links.
## โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

mkdir -p "${HOME}/.config/shell"
ln -nsf "${_SSDF_PACKAGE_DIR}/config/common.sh" "${HOME}/.config/shell/common.sh"
ln -nsf "${_SSDF_PACKAGE_DIR}/config/aliases.sh" "${HOME}/.config/shell/aliases.sh"
ln -nsf "${_SSDF_PACKAGE_DIR}/config/aliases.apt.sh" "${HOME}/.config/shell/aliases.apt.sh"
ln -nsf "${_SSDF_PACKAGE_DIR}/config/envvars.sh" "${HOME}/.config/shell/envvars.sh"
ln -nsf "${_SSDF_PACKAGE_DIR}/config/path.sh" "${HOME}/.config/shell/path.sh"

## โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
## โ Additional config / install
## โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Ensure supported shells source the main generic shell config
for _SSDF_SUPPORTED_SHELL in \
    "${HOME}/.bashrc" \
    "${HOME}/.zshrc" \
    "${HOME}/.profile"
do
    if [ -f "${_SSDF_SUPPORTED_SHELL}" ]; then
        _ssdf_append_source \
            "${_SSDF_SUPPORTED_SHELL}" \
            "${HOME}/.config/shell/common.sh"
    fi
done

_ssdf_echo_success "${_SSDF_PACKAGE_NAME} installed"

## โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
## ๐งน Cleaning up local variables
## โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

unset _SSDF_PACKAGE_DIR \
    _SSDF_ROOT_DIR \
    _SSDF_PACKAGE_NAME \
    _SSDF_SUPPORTED_SHELL
